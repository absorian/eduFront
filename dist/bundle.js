const e=new URL("https://fwd.innopolis.university/api/comic"),t=new URL("https://fwd.innopolis.university/api/hw2"),i=new URLSearchParams([["email","i.iskakov@innopolis.university"]]).toString();let o=new class{constructor(e){this.id=e,this.image=document.querySelector(`#${this.id} + .selectableimglabel > .selectableimg`),this.image_double=document.querySelector(`#${this.id} + .selectableimglabel + .selectableimgdouble`),this.title=document.querySelector(`#${this.id} + .selectableimglabel + .selectableimgdouble + p`),this.image_double.setAttribute("alt","duplicate")}setImage(e,t){this.image.setAttribute("src",e),this.image.setAttribute("alt",t),this.image_double.setAttribute("src",e)}setTitle(e){this.title.textContent=e}}("comic");const l=document.getElementById("comicrefresh"),n=document.getElementById("comicdate");function s(){fetch(`${t.origin}${t.pathname}?${i}`,{method:"GET"}).then((e=>e.text())).then((t=>{var i;console.log(`Retrieved id: ${t}`),i=t,fetch(`${e.origin}${e.pathname}?${new URLSearchParams([["id",i]]).toString()}`,{method:"GET"}).then((e=>e.json())).then((e=>{console.log("Retrieved comic:"),console.log(e),o.setImage(e.img,e.alt),o.setTitle(e.safe_title);const t=new Date(e.year,e.month,e.day);n.textContent=`Upload Date: ${t.toLocaleDateString()}`})).catch((e=>{console.log(`Error on getting the Comic: ${e}`)}))})).catch((e=>{console.log(`Error on getting the Comic ID: ${e}`)}))}s(),l.addEventListener("click",s);
